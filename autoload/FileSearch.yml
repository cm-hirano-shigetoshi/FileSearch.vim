base_task:
    variables:
        dir: $(pwd)
    source: pt -g ^ "{{dir}}"
    source_transform: python {{yml_dir}}/norm_path.py --root "{{dir}}"
    options:
        - multi
        - reverse
        - header="$(echo "{{dir}}" | python {{yml_dir}}/norm_path.py -a -t -d)"
        - height=9999
        - query="$(echo {{arg1}} | tr '/.' '  ')"
        - preview="echo {} | bash {{yml_dir}}/preview.sh"
    post_operations:
      enter:
        - pipe: python {{yml_dir}}/norm_path.py -a
        - join
task_switch:
    alt-u:
      variables:
        dir: $(readlink -e "{{dir}}"/..)
    alt-f:
        source: pt -g ^ "{{dir}}"
    alt-a:
        source: find "{{dir}}"
    alt-h:
        source: find "{{dir}}" -type f
    alt-d:
        source: find "{{dir}}" -type d

